/*!
* Clamp.js 0.1
*
* Copyright 2011, Joseph Schmitt http://reusablebits.com, http://josephschmitt.me
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
(function(){window.$clamp=function(f,h){function l(b,c){if(!j.getComputedStyle)j.getComputedStyle=function(d){this.el=d;this.getPropertyValue=function(a){var m=/(\-([a-z]){1})/g;if(a=="float")a="styleFloat";if(m.test(a))a=a.replace(m,function(s,t,q){return q.toUpperCase()});return d.currentStyle&&d.currentStyle[a]?d.currentStyle[a]:null};return this};return j.getComputedStyle(b,null).getPropertyValue(c)}function n(b){b=b||f.clientHeight;var c=o(f);return Math.max(Math.floor(b/c),0)}function o(b){var c=
l(b,"line-height");if(c=="normal")c=parseInt(l(b,"font-size"))*1.2;return parseInt(c)}function k(b){function c(a){if(a.children.length>0)return c(Array.prototype.slice.call(a.children).pop());else if(!a.lastChild||!a.lastChild.nodeValue||a.lastChild.nodeValue==""||a.lastChild.nodeValue=="\u2026"){a.parentNode.removeChild(a);return c(f)}else return a.lastChild}if(b){var d=c(f);d.nodeValue=d.nodeValue.substr(0,d.length-1);d.nodeValue=d.nodeValue.substr(0,d.nodeValue.length-3)+"\u2026";if(f.clientHeight>
b)i.animate?setTimeout(function(){k(b)},1):k(b)}}h=h||{};var j=window,i={clamp:h.clamp||2,useNativeClamp:typeof h.useNativeClamp!="undefined"?h.useNativeClamp:true,animate:h.animate||false},g=f.style,r=typeof f.style.webkitLineClamp!="undefined",e=i.clamp,p=e.indexOf&&(e.indexOf("px")>-1||e.indexOf("em")>-1);if(e=="auto")e=n();else if(p)e=n(parseInt(e));if(r&&i.useNativeClamp){g.overflow="hidden";g.textOverflow="ellipsis";g.webkitBoxOrient="vertical";g.display="-webkit-box";g.webkitLineClamp=e;if(p)g.height=
i.clamp+"px"}else{g=o(f)*e;k(g)}}})();