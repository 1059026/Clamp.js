/*!
* Clamp.js 0.3
*
* Copyright 2011, Joseph Schmitt http://reusablebits.com, http://josephschmitt.me
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
(function(){window.$clamp=function(e,g){var l,q,j,r;function s(a,b){if(!m.getComputedStyle)m.getComputedStyle=function(a){this.el=a;this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;b=="float"&&(b="styleFloat");c.test(b)&&(b=b.replace(c,function(a,b,c){return c.toUpperCase()}));return a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null};return this};return m.getComputedStyle(a,null).getPropertyValue(b)}function t(a){var a=a||e.clientHeight,b=u(e);return Math.max(Math.floor(a/b),0)}function u(a){var b=
s(a,"line-height");b=="normal"&&(b=parseInt(s(a,"font-size"))*1.2);return parseInt(b)}function k(a){return a.lastChild.children&&a.lastChild.children.length>0?k(Array.prototype.slice.call(a.children).pop()):!a.lastChild||!a.lastChild.nodeValue||a.lastChild.nodeValue==""||a.lastChild.nodeValue=="\u2026"?(a.lastChild.parentNode.removeChild(a.lastChild),k(e)):a.lastChild}function n(a,b){if(b){var d=a.nodeValue.replace(/\u2026/,"");c||(f=h.length>0?h.shift():"",c=d.split(f));c&&c.length>1?(o=c.pop(),
p(a,c.join(f))):c=null;if(e.clientHeight<=b)if(h.length>=0&&f!="")p(a,c.join(f)+f+o),c=null;else return false;else!c&&f==""&&(p(a,""),a=k(e),h=l.slice(0),f=h[0],o=c=null);q?setTimeout(function(){n(a,b)},10):n(a,b)}}function p(a,b){a.nodeValue=b+"\u2026"}var g=g||{},m=window;j=g.clamp||2;r=typeof g.useNativeClamp!="undefined"?g.useNativeClamp:true;l=g.splitOnChars||[".","-","\u2013","\u2014"," "];q=g.animate||false;var i=e.style,w=typeof e.style.webkitLineClamp!="undefined",d=j,v=d.indexOf&&(d.indexOf("px")>
-1||d.indexOf("em")>-1),h=l.slice(0),f=h[0],c,o;d=="auto"?d=t():v&&(d=t(parseInt(d)));if(w&&r){if(i.overflow="hidden",i.textOverflow="ellipsis",i.webkitBoxOrient="vertical",i.display="-webkit-box",i.webkitLineClamp=d,v)i.height=j+"px"}else j=u(e)*d,n(k(e),j)}})();